<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="../mhea_sped.css">
        <link rel="icon" type="image/x-icon" href="../images/bunny_face.ico">
        <title>SpEd Message Builder</title>
    </head>

    <body class="pink">
        <!-- Logo -->
        <a href="../index.html">
            <img src="../images/bunny_index.jpg" height="75">
        </a>

        <!-- Navigation Bar -->
        <div align="left">
            <ul class="topnav">
                <li class="topnav">
                    <a class="topnav" href="../index.html">Home</a>
                </li>
                <li class="topnav">
                    <a class="topnav" href="../add.html">Add</a>
                </li>
                <li class="topnav">
                    <a class="topnav_active" href="../status.html">Status</a>
                </li>
                <li class="topnav">
                    <a class="topnav" href="../exit.html">Exit</a>
                </li>
                <li class="topnav">
                    <a class="topnav" href="../other.html">Other</a>
                </li>
            </ul>
        </div> <!-- Navigation Bar -->

        <div class="header">
            <h1 align="center">
                <b>AP Declined</b>
            </h1>
        </div> <!-- Header -->

        <script>
            function refresh(){
                location.href = "ap_declined.html";
            }
            
            function displayNote(){
                const d = new Date();
                let yyyy = d.getFullYear();
                let mm = d.getMonth() + 1;
                let dd = d.getDate();
                let hour = d.getHours();
                let minutes = d.getMinutes();
                let seconds = d.getSeconds();
                var datetime = yyyy + "." + mm + "." + dd + ", " + hour + ":" + minutes + ":" + seconds;

                var note = "Note from " + datetime + "<br>";

                var lname = document.getElementById("lname").value.trim();
                var fname = document.getElementById("fname").value.trim();
                var requester = document.getElementById("requester").value.trim();
                var role = document.getElementById("role").value.trim();
                var req_type = "AP Declined";
                var req_comment = document.getElementById("req_comment").value.trim();

                /*
                var note = "Note for ";
                note += lname;
                if(lname!="" && fname!=""){note+= ", ";}
                note += fname;
                */

                note += "<br>" + requester + ", " + role + " requested: " + req_type;
                if(req_comment!=""){note += "<br>\"" + req_comment + "\"";}

                var req_status = document.getElementById("req_status").value;
                var sig = document.getElementById("sig").value.trim();
                var special_notes = document.getElementById("special_notes").value.trim();
                
                note += "<br><br>" + req_status;
                if(sig!=""){note += "<br>Parent signed  \"I do not consent to the proposed assessment\" on " + sig + ".";}
                if(special_notes!=""){note += "<br>" + special_notes;}
                
                //CALPADS Data
                var ssid = document.getElementById("ssid").value.trim();
                var txn = document.getElementById("txn").value.trim();
                var ap_consent = document.getElementById("ap_consent").value.trim();
                var meet = document.getElementById("meet").value.trim();
                var plan = document.getElementById("plan").value.trim();
                
                note += "<br><br>SSID: ";
                note += "<br>CALPADS txn: ";
                note += "<br>Parent consent for AP: " + ap_consent;
                note += "<br>Meeting Type: " + meet;
                note += "<br>Plan Type: " + plan;

                var dnr = document.getElementById("dnr").value.trim();
                var senr = document.getElementById("senr").value.trim();
                
                note += "<br><br>DNR: " + dnr;
                if(senr!="n/a"){note += "<br>Non-ADA: " + senr;}
     
                var status_change = document.getElementById("status_change").value.trim();
                note += "<br><br>Status changed to " + status_change + ".";

                return note;
            }
        </script>

        <div class="body">
            <form>
                <label for="lname">Last Name</label>
                <input type="text" id="lname" value="">

                <br>
                <label for="fname">First Name</label>
                <input type="text" id="fname" value="">

                <br>
                <label for="requester">Requested by</label>
                <input type="text" id="requester">

                <br>
                <label for="role">Staff Role</label>
                <input list="roles" for="role" id="role" value="">
                <datalist id="roles">
                    <option value="Site"></option>
                    <option value="Psych"></option>
                    <option value="Special Ed. Teacher"></option>
                    <option value="SLP"></option>
                    <option value="Occupational Therapist"></option>
                    <option value="Program Specialist"></option>
                    <option value="Behavior Intervention Specialist"></option>
                    <option value="General Ed. Teacher"></option>
                </datalist>

                <br>
                <label for="req_comment">Request Comment</label>
                <textarea id="req_comment" rows=2 cols="50"></textarea>

                <datalist id="req_status_list">
                    <option value="Request completed."></option>
                    <option value="Request partially completed."></option>
                    <option value="No action needed."></option>
                </datalist>

                <br><br>
                <b>PROCEDURES</b>

                <br>
                <label for="sig">Parent signed "I do not consent to the proposed assessment" on </label>
                <input type="text" id="sig" value="">

                <br>
                <textarea id="special_notes" rows=2 cols="50" placeholder="special notes..." value=""></textarea>

                <!-- CALPADS Data-->
                <br><br>
                <label for="ssid">SSID</label>
                <input type="text" id="ssid" value="">

                <datalist id="txn_list">
                    <option value="n/a"></option>
                    <option value="deleted"></option>
                </datalist>

                <br>
                <label for="txn">CALPADS txn</label>
                <input list="txn_list" id="txn" value="">

                <datalist id="blank_list">
                    <option value="blank"></option>
                </datalist>

                <br>
                <label for="ap_consent">Date of parent consent for AP</label>
                <input list="blank_list" id="ap_consent" value="">

                <br>
                <label for="meet">Meeting Type</label>
                <input list="blank_list" id="meet" value="">

                <br>
                <label for="plan">Plan Type</label>
                <input list="blank_list" for="plan" id="plan" value="">
           
                <br><br>
                <datalist id="dnr_list">
                    <option value="DNR"></option>
                </datalist>
                <label for="dnr">Do Not Report</label>
                <input list="dnr_list" id="dnr" value="">

                <br>
                <datalist id="senr_list">
                    <option value="n/a"></option>
                    <option value="Notified Clerk to disenroll"></option>
                </datalist>
                <label for="senr">Non-ADA</label>
                <input list="senr_list" id="senr" value="">

                <br><br>
                <datalist id="status_change_list">
                    <option value="DNQ/Not Providing Services"></option>
                </datalist>
                <label for="status_change">Status changed to</label>
                <input list="status_change_list" for="status_change" id="status_change" value="">
 
                <br>
                <label for="req_status"><b>REQUEST STATUS</b></label>
                <input list="req_status_list" for="req_status" id="req_status" value="">
            </form>

            <button onclick="document.getElementById('note').innerHTML=displayNote();">Display Note</button>
            <button onclick="refresh()">Clear Fields</button>

            <p id="note"></p>
        </div> <!-- Body -->
    </body>
</html>